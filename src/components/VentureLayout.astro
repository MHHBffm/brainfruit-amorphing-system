---
/**
 * VentureLayout.astro
 *
 * Shared base layout for all venture websites.
 * Applies venture theme via data-venture attribute + CSS variables.
 *
 * Usage:
 * ---
 * import VentureLayout from '../components/VentureLayout.astro';
 * import { getVenture } from '../utilities/venture';
 *
 * const ventureKey = 'amorphing';
 * const venture = getVenture(ventureKey);
 * ---
 *
 * <VentureLayout ventureKey={ventureKey} title={venture.name}>
 *   <h1>Welcome to {venture.name}</h1>
 *   <!-- Your content here -->
 * </VentureLayout>
 *
 * Result: <html data-venture="amorphing"> with purple theme applied
 */

import { getVentureWithStyle, isValidVentureKey, type VentureKey } from '../utilities/venture';
import '../styles/ventures-theme.css';

interface Props {
  ventureKey: VentureKey;
  title?: string;
  description?: string;
  lang?: string;
}

const {
  ventureKey,
  title,
  description,
  lang = 'de'
} = Astro.props;

// Type safety check
if (!isValidVentureKey(ventureKey)) {
  throw new Error(`Invalid venture key: ${ventureKey}`);
}

const { venture, style } = getVentureWithStyle(ventureKey);
const pageTitle = title || venture.name;
const pageDescription = description || venture.description;
---

<!DOCTYPE html>
<html lang={lang} data-venture={ventureKey}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={pageDescription} />

    {/* Open Graph / Social Media */}
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />

    {/* Fonts */}
    <link href="https://fonts.googleapis.com/css2?family=Bitter:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />

    <title>{pageTitle}</title>
  </head>

  <body>
    <slot />
  </body>
</html>
