---
/**
 * Logo.astro - Logo System per logo-system-final-concept.html
 *
 * Design: Circle (colored gradient) + Text name (black, overlapping)
 * Example: [Purple Circle] "brainfruit" (black text, overlaps from circle center)
 *
 * Usage:
 * <Logo ventureKey="brainfruit" showName size="medium" />
 *
 * Sizes:
 * - small: circle 60px, text 24px
 * - medium: circle 110px, text 48px
 * - large: circle 160px, text 64px
 */

import { getVentureWithStyle, isValidVentureKey, type VentureKey } from '../utilities/venture';

interface Props {
  ventureKey: VentureKey;
  size?: 'small' | 'medium' | 'large';
  showName?: boolean;
  className?: string;
}

const {
  ventureKey,
  size = 'medium',
  showName = false,
  className = ''
} = Astro.props;

if (!isValidVentureKey(ventureKey)) {
  throw new Error(`Invalid venture key: ${ventureKey}`);
}

const { venture, style } = getVentureWithStyle(ventureKey);

// Size configuration per design spec
const sizeConfig = {
  small: { circle: 60, text: 24, marginLeft: -30 },
  medium: { circle: 110, text: 48, marginLeft: -55 },
  large: { circle: 160, text: 64, marginLeft: -80 }
};

const config = sizeConfig[size];
---

<div class={`logo-container ${className}`} data-venture={ventureKey}>
  <div class="logo-wrapper">
    {/* Colored circle with gradient - using HTML div, not SVG */}
    <div
      class="circle-bg"
      style={`
        width: ${config.circle}px;
        height: ${config.circle}px;
        background: linear-gradient(135deg, ${style.primary} 0%, ${style.primaryLight} 100%);
      `}
    />

    {/* Venture name text - BLACK, overlapping circle */}
    {showName && (
      <span
        class="logo-text"
        style={`
          font-size: ${config.text}px;
          margin-left: ${config.marginLeft}px;
        `}
      >
        {venture.name}
      </span>
    )}
  </div>
</div>

<style>
  .logo-container {
    display: inline-block;
  }

  .logo-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0;
  }

  .circle-bg {
    position: relative;
    border-radius: 50%;
    z-index: 1;
    opacity: 0.95;
    flex-shrink: 0;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  .logo-text {
    font-family: 'Bitter', serif;
    font-weight: 600;
    color: #1a1a1a; /* ALWAYS black per design system */
    white-space: nowrap;
    letter-spacing: -0.5px;
    z-index: 2;
    position: relative;
    line-height: 1;
  }

  /* Hover effect */
  .logo-wrapper:hover .circle-bg {
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
  }

  /* Animation on load */
  @keyframes logoFadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .logo-container {
    animation: logoFadeIn 0.4s ease-out;
  }
</style>
